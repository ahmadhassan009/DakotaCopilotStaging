"use strict";(self.webpackChunkcrm_integration=self.webpackChunkcrm_integration||[]).push([[429,846],{84475:function(e,n,t){t.d(n,{L:function(){return c}});var i=t(85893),a=t(44347),s=t(97920),r=t(67294),l=t(22327),o=function(){return o=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},o.apply(this,arguments)};function c(e){var n=e.title,t=(e.placeholder,e.value),c=e.required,d=void 0!==c&&c,u=e.disabled,p=void 0!==u&&u,f=(e.type,e.inputProps,e.error),h=void 0!==f&&f,g=e.options,v=e.onChange,m=(0,r.useState)(h),j=m[0],b=m[1],x=(0,r.useState)(""),y=(x[0],x[1]),_=(0,l.$)().t;return(0,r.useEffect)((function(){b(h)}),[h]),(0,r.useEffect)((function(){y(j&&d?_("required-field"):"")}),[j]),(0,i.jsxs)("div",o({className:"dropdown-container"},{children:[(0,i.jsxs)("p",o({className:"dropdown-title"},{children:[d&&(0,i.jsx)("span",{children:"*"}),n]})),(0,i.jsx)(s.Z,o({className:"dropdown",labelId:"demo-simple-select-label",id:"demo-simple-select",value:t,label:"",onChange:function(e){return v(e.target.value)},disabled:p},{children:g.map((function(e){return(0,i.jsx)(a.Z,o({value:e.value,disabled:e.isDisabled},{children:e.name}))}))}))]}))}},41846:function(e,n,t){t.r(n),t.d(n,{default:function(){return $}});var i=t(85893),a=t(15725),s=t(67294),r=t(22327),l=t(48966),o=t.n(l),c=function(e){return!e||o().isEmail(e)},d=t(1435),u=t(60343),p=t(97896),f=t(9573),h=t(56011),g=t(3694),v=t(46926),m=t(38732),j=t(27304),b=t(84475),x=t(55437),y=t(89149),_=t(50542),S=function(){return S=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},S.apply(this,arguments)};function O(e){var n=e.title,t=e.checked,a=e.disabled,s=void 0!==a&&a,r=e.onToggle;return(0,i.jsx)("div",S({className:"switch-container"},{children:(0,i.jsx)(_.Z,{control:(0,i.jsx)(y.Z,{disabled:s,checked:t,onChange:r}),label:n,labelPlacement:"start"})}))}var C=t(74721),N=function(){return N=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},N.apply(this,arguments)};function T(e){var n=e.title,t=e.data,a=e.setData,l=e.error,o=e.disabled,c=void 0!==o&&o,d=(0,r.$)().t,u=(0,s.useMemo)((function(){return[{name:"--None--",value:"none"},{name:"Send Email",value:"sendEmail"}]}),[]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(v.Z,N({align:"left",scope:"row",colSpan:1},{children:(0,i.jsx)(O,{disabled:c,title:n,checked:t.checked,onToggle:function(){return a(N(N({},t),{checked:!t.checked}))}})})),(0,i.jsx)(v.Z,N({align:"left",scope:"row",colSpan:1},{children:(0,i.jsx)(b.L,{title:"",value:t.selectedOption||"none",options:u,onChange:function(e){return a(N(N({},t),{selectedOption:e}))},disabled:c||!t.checked})})),(0,i.jsx)(v.Z,N({align:"left",scope:"row",colSpan:1},{children:(0,i.jsxs)("span",N({className:"emails-input"},{children:[(0,i.jsx)(x.U,{title:"",value:t.emails,onChange:function(e){return a(N(N({},t),{emails:e}))},placeholder:d("additional-settings.enterYourEmailAddresses"),disabled:c||!t.selectedOption||"none"===t.selectedOption||!t.checked,error:l,helperText:l?d("additional-settings.incorrect-emails"):" "}),(0,i.jsx)(j.Z,N({className:"tool-tip",title:d("additional-settings.multiple-email-addresses")},{children:(0,i.jsx)(C.Z,{})}))]}))}))]})})}var Z=t(54718),E=function(){return E=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},E.apply(this,arguments)};function k(e){var n=e.data,t=e.errors,a=e.setData,s=(0,d.CG)(u.dy),l=(s.id,s.additionalSettingsStatus),o=(0,r.$)().t;return(0,i.jsxs)(i.Fragment,{children:["loading"===l&&(0,i.jsxs)("div",E({className:"spinner"},{children:[" ",(0,i.jsx)(Z.Z,{size:"medium",variant:"base",assistiveText:{label:""}})]})),(0,i.jsx)(p.Z,E({className:"table-container",sx:{maxHeight:440}},{children:(0,i.jsxs)(f.Z,E({stickyHeader:!0,"aria-label":"sticky table"},{children:[(0,i.jsx)(h.Z,{children:(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(v.Z,E({className:"table-cell",align:"left",colSpan:1},{children:o("additional-settings.scheduler-status")})),(0,i.jsx)(v.Z,E({className:"table-cell",align:"left",colSpan:1},{children:o("additional-settings.notification-settings")})),(0,i.jsx)(v.Z,E({className:"table-cell",align:"left",colSpan:1},{children:o("additional-settings.notification-recipient")}))]})}),(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(T,{title:o("additional-settings.notify-field-changes"),data:JSON.parse(n.notifyFieldChanges),setData:function(e){return a(E(E({},n),{notifyFieldChanges:JSON.stringify(e)}))},error:t.notifyFieldChanges,disabled:!0}),(0,i.jsx)(T,{title:o("additional-settings.receive-technical-emails"),data:JSON.parse(n.receiveTechnicalEmails),setData:function(e){return a(E(E({},n),{receiveTechnicalEmails:JSON.stringify(e)}))},error:t.receiveTechnicalEmails,disabled:!0})]})]}))}))]})}var F=t(21588),w=t(44807),P=function(){return P=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},P.apply(this,arguments)};function D(e){var n=e.handleSave,t=e.isValidationSuccessful,a=(0,r.$)().t,s=(0,d.CG)(u.dy).client_setup_status,l=(0,d.TL)();return(0,i.jsxs)(i.Fragment,{children:[9==s&&(0,i.jsxs)("span",P({className:"bottom-buttons"},{children:[(0,i.jsx)(F.z,{text:a("cancel-button"),onClick:function(){return(0,w.T)("/dashboard")},isDisabled:!0}),(0,i.jsx)(F.z,{text:a("save-button"),onClick:function(){return n()},isDisabled:!0})]})),3==s&&(0,i.jsxs)("span",P({className:"bottom-buttons"},{children:[(0,i.jsx)(F.z,{text:a("back"),onClick:function(){return l.setSetupStatus(Number(s)-1)}}),(0,i.jsx)(F.z,{text:a("continue-to-add-to-crm"),onClick:function(){t&&l.setSetupStatus(9),n()}})]}))]})}var J=function(){return J=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},J.apply(this,arguments)},z={autoSync:!1,notifyFieldChanges:!1,receiveTechnicalEmails:!1,records_per_page:!1,logs_per_page:!1,logs_inventory_per_page:!1};function A(e){var n=e.isFromAddToCrm,t=void 0!==n&&n,a=(0,r.$)().t,l=(0,d.CG)(u.dy),o=l.client_setup_status,p=l.additionalSettings,f=(0,s.useState)({autoSync:p.autoSync,notifyFieldChanges:p.notifyFieldChanges,receiveTechnicalEmails:p.receiveTechnicalEmails,records_per_page:p.records_per_page,logs_per_page:p.logs_per_page,logs_inventory_per_page:p.logs_inventory_per_page}),h=f[0],g=f[1],v=(0,s.useState)(z),m=v[0],j=v[1],b=(0,d.TL)(),x=(0,s.useState)(!0),y=x[0],_=x[1];(0,s.useEffect)((function(){var e=p.autoSync,n=p.notifyFieldChanges,t=p.receiveTechnicalEmails,i=p.records_per_page,a=p.logs_per_page,s=p.logs_inventory_per_page;g({autoSync:e,notifyFieldChanges:n,receiveTechnicalEmails:t,records_per_page:i,logs_per_page:a,logs_inventory_per_page:s})}),[p]),(0,s.useEffect)((function(){j(z),O()}),[h]);var S=function(){var e,n,t,i,a,s,r=J({},z),l=null===(n=null===(e=JSON.parse(h.autoSync))||void 0===e?void 0:e.emails)||void 0===n?void 0:n.trim();if(","===(null==l?void 0:l.substring(l.length-1)))r.autoSync=!0;else{var o=null==l?void 0:l.split(",");null==o||o.find((function(e){return r.autoSync=!c(e.trim()),r.autoSync}))}var d=null===(i=null===(t=JSON.parse(h.notifyFieldChanges))||void 0===t?void 0:t.emails)||void 0===i?void 0:i.trim();if(","===(null==d?void 0:d.substring(d.length-1)))r.notifyFieldChanges=!0;else{var u=null==d?void 0:d.split(",");null==u||u.find((function(e){return r.notifyFieldChanges=!c(e.trim()),r.notifyFieldChanges}))}var p=null===(s=null===(a=JSON.parse(h.receiveTechnicalEmails))||void 0===a?void 0:a.emails)||void 0===s?void 0:s.trim();if(","===(null==p?void 0:p.substring(p.length-1)))r.receiveTechnicalEmails=!0;else{var f=null==p?void 0:p.split(",");null==f||f.find((function(e){return r.receiveTechnicalEmails=!c(e.trim()),r.receiveTechnicalEmails}))}return r},O=function(){_(!Object.values(S()).includes(!0))};return(0,i.jsxs)(i.Fragment,{children:[9==o&&t&&(0,i.jsxs)("span",J({className:"configurations-header"},{children:[(0,i.jsx)("p",J({className:"bold"},{children:a("headings.configurations")})),(0,i.jsx)("p",J({style:{color:"#697cd8",marginLeft:"10px"}},{children:a("additional-settings.comming-soon")}))]})),(0,i.jsx)(k,{data:h,setData:g,errors:m}),(0,i.jsx)(D,{handleSave:function(){(function(){var e=S();return j(e),!Object.values(e).includes(!0)})()&&b.saveAdditionalSettings(h)},isValidationSuccessful:y})]})}var L=function(){return L=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},L.apply(this,arguments)},$=function(e){var n=e.isFromAddToCrm,t=void 0!==n&&n;return(0,i.jsx)(a.ZP,L({container:!0,className:"additional-settings-page"},{children:(0,i.jsx)(a.ZP,L({item:!0,xs:12,className:"main-section"},{children:(0,i.jsx)(A,{isFromAddToCrm:t})}))}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFnQkEsT0FBd0IsSUFBUHRGLEdBQXdCQSxFQUNyRSxPQUFRLFNBQUsrRyxFQUFBLEdBQU0sRUFBUyxDQUFFQyxXQUFXLEVBQU0vRixVQUFXLDRCQUE4QixDQUFFQyxVQUFVLFNBQUs2RixFQUFBLEdBQU0sRUFBUyxDQUFFRSxNQUFNLEVBQU1DLEdBQUksR0FBSWpHLFVBQVcsZ0JBQWtCLENBQUVDLFVBQVUsU0FBS21FLEVBQW9CLENBQUVDLGVBQWdCQSxTQUN0TyxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3JtLWludGVncmF0aW9uLy4vc3JjL2FwcC9jb21wb25lbnRzL2Ryb3Bkb3duL0Ryb3Bkb3duLnRzeCIsIndlYnBhY2s6Ly9jcm0taW50ZWdyYXRpb24vLi9zcmMvYXBwL2hlbHBlcnMvdmFsaWRhdG9ycy50cyIsIndlYnBhY2s6Ly9jcm0taW50ZWdyYXRpb24vLi9zcmMvYXBwL2NvbXBvbmVudHMvc3dpdGNoL1N3aXRjaC50c3giLCJ3ZWJwYWNrOi8vY3JtLWludGVncmF0aW9uLy4vc3JjL2FwcC9mZWF0dXJlcy9hZGRpdGlvbmFsLXNldHRpbmdzL2NvbXBvbmVudHMvYWRkaXRpb25hbC1zZXR0aW5ncy10YWJsZS9jb21wb25lbnRzL2VtYWlsLW5vdGZpY2F0aW9uLXNldHRpbmdzL0VtYWlsTm90aWZpY2F0aW9uU2V0dGluZ3MudHN4Iiwid2VicGFjazovL2NybS1pbnRlZ3JhdGlvbi8uL3NyYy9hcHAvZmVhdHVyZXMvYWRkaXRpb25hbC1zZXR0aW5ncy9jb21wb25lbnRzL2FkZGl0aW9uYWwtc2V0dGluZ3MtdGFibGUvQWRkaXRpb25hbFNldHRpbmdzVGFibGUudHN4Iiwid2VicGFjazovL2NybS1pbnRlZ3JhdGlvbi8uL3NyYy9hcHAvZmVhdHVyZXMvYWRkaXRpb25hbC1zZXR0aW5ncy9jb21wb25lbnRzL2JvdHRvbS1idXR0b25zL0JvdHRvbUJ1dHRvbnMudHN4Iiwid2VicGFjazovL2NybS1pbnRlZ3JhdGlvbi8uL3NyYy9hcHAvZmVhdHVyZXMvYWRkaXRpb25hbC1zZXR0aW5ncy9BZGRpdGlvbmFsU2V0dGluZ3MudHN4Iiwid2VicGFjazovL2NybS1pbnRlZ3JhdGlvbi8uL3NyYy9hcHAvcGFnZXMvYWRkaXRpb25hbC1zZXR0aW5ncy9BZGRpdGlvbmFsU2V0dGluZ3NQYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbmltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XHJcbmltcG9ydCBNZW51SXRlbSBmcm9tICdAbXVpL21hdGVyaWFsL01lbnVJdGVtJztcclxuaW1wb3J0IFNlbGVjdCBmcm9tICdAbXVpL21hdGVyaWFsL1NlbGVjdCc7XHJcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCc7XHJcbmV4cG9ydCBmdW5jdGlvbiBEcm9wZG93bihfYSkge1xyXG4gICAgdmFyIHRpdGxlID0gX2EudGl0bGUsIHBsYWNlaG9sZGVyID0gX2EucGxhY2Vob2xkZXIsIHZhbHVlID0gX2EudmFsdWUsIF9iID0gX2EucmVxdWlyZWQsIHJlcXVpcmVkID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2IsIF9jID0gX2EuZGlzYWJsZWQsIGRpc2FibGVkID0gX2MgPT09IHZvaWQgMCA/IGZhbHNlIDogX2MsIHR5cGUgPSBfYS50eXBlLCBfZCA9IF9hLmlucHV0UHJvcHMsIGlucHV0UHJvcHMgPSBfZCA9PT0gdm9pZCAwID8ge30gOiBfZCwgX2UgPSBfYS5lcnJvciwgZXJyb3IgPSBfZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfZSwgb3B0aW9ucyA9IF9hLm9wdGlvbnMsIG9uQ2hhbmdlID0gX2Eub25DaGFuZ2U7XHJcbiAgICB2YXIgX2YgPSB1c2VTdGF0ZShlcnJvciksIGlucHV0RXJyb3IgPSBfZlswXSwgc2V0SW5wdXRFcnJvciA9IF9mWzFdO1xyXG4gICAgdmFyIF9nID0gdXNlU3RhdGUoJycpLCBoZWxwZXJUZXh0ID0gX2dbMF0sIHNldEhlbHBlclRleHQgPSBfZ1sxXTtcclxuICAgIHZhciB0ID0gdXNlVHJhbnNsYXRpb24oKS50O1xyXG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZXRJbnB1dEVycm9yKGVycm9yKTtcclxuICAgIH0sIFtlcnJvcl0pO1xyXG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoaW5wdXRFcnJvciAmJiByZXF1aXJlZCkge1xyXG4gICAgICAgICAgICBzZXRIZWxwZXJUZXh0KHQoJ3JlcXVpcmVkLWZpZWxkJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2V0SGVscGVyVGV4dCgnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW2lucHV0RXJyb3JdKTtcclxuICAgIHJldHVybiAoX2pzeHMoXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6ICdkcm9wZG93bi1jb250YWluZXInIH0sIHsgY2hpbGRyZW46IFtfanN4cyhcInBcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6ICdkcm9wZG93bi10aXRsZScgfSwgeyBjaGlsZHJlbjogW3JlcXVpcmVkICYmIF9qc3goXCJzcGFuXCIsIHsgY2hpbGRyZW46IFwiKlwiIH0pLCB0aXRsZV0gfSkpLCBfanN4KFNlbGVjdCwgX19hc3NpZ24oeyBjbGFzc05hbWU6ICdkcm9wZG93bicsIGxhYmVsSWQ6IFwiZGVtby1zaW1wbGUtc2VsZWN0LWxhYmVsXCIsIGlkOiBcImRlbW8tc2ltcGxlLXNlbGVjdFwiLCB2YWx1ZTogdmFsdWUsIGxhYmVsOiBcIlwiLCBvbkNoYW5nZTogZnVuY3Rpb24gKGVsbSkgeyByZXR1cm4gb25DaGFuZ2UoZWxtLnRhcmdldC52YWx1ZSk7IH0sIGRpc2FibGVkOiBkaXNhYmxlZCB9LCB7IGNoaWxkcmVuOiBvcHRpb25zLm1hcChmdW5jdGlvbiAob3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfanN4KE1lbnVJdGVtLCBfX2Fzc2lnbih7IHZhbHVlOiBvcHRpb24udmFsdWUsIGRpc2FibGVkOiBvcHRpb24uaXNEaXNhYmxlZCB9LCB7IGNoaWxkcmVuOiBvcHRpb24ubmFtZSB9KSkpO1xyXG4gICAgICAgICAgICAgICAgfSkgfSkpXSB9KSkpO1xyXG59XHJcbiIsImltcG9ydCB2YWxpZGF0b3IgZnJvbSAndmFsaWRhdG9yJztcclxuZXhwb3J0IHZhciBlbWFpbFZhbGlkYXRvciA9IGZ1bmN0aW9uIChlbWFpbCkge1xyXG4gICAgaWYgKGVtYWlsKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRvci5pc0VtYWlsKGVtYWlsKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59O1xyXG4iLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbmltcG9ydCB7IGpzeCBhcyBfanN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XHJcbmltcG9ydCBNVUlTd2l0Y2ggZnJvbSAnQG11aS9tYXRlcmlhbC9Td2l0Y2gnO1xyXG5pbXBvcnQgRm9ybUNvbnRyb2xMYWJlbCBmcm9tICdAbXVpL21hdGVyaWFsL0Zvcm1Db250cm9sTGFiZWwnO1xyXG5leHBvcnQgZnVuY3Rpb24gU3dpdGNoKF9hKSB7XHJcbiAgICB2YXIgdGl0bGUgPSBfYS50aXRsZSwgY2hlY2tlZCA9IF9hLmNoZWNrZWQsIF9iID0gX2EuZGlzYWJsZWQsIGRpc2FibGVkID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2IsIG9uVG9nZ2xlID0gX2Eub25Ub2dnbGU7XHJcbiAgICByZXR1cm4gKF9qc3goXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6ICdzd2l0Y2gtY29udGFpbmVyJyB9LCB7IGNoaWxkcmVuOiBfanN4KEZvcm1Db250cm9sTGFiZWwsIHsgY29udHJvbDogX2pzeChNVUlTd2l0Y2gsIHsgZGlzYWJsZWQ6IGRpc2FibGVkLCBjaGVja2VkOiBjaGVja2VkLCBvbkNoYW5nZTogb25Ub2dnbGUgfSksIGxhYmVsOiB0aXRsZSwgbGFiZWxQbGFjZW1lbnQ6ICdzdGFydCcgfSkgfSkpKTtcclxufVxyXG4iLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbmltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzLCBGcmFnbWVudCBhcyBfRnJhZ21lbnQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcclxuaW1wb3J0IHsgVG9vbHRpcCB9IGZyb20gXCJAbXVpL21hdGVyaWFsXCI7XHJcbmltcG9ydCBUYWJsZUNlbGwgZnJvbSBcIkBtdWkvbWF0ZXJpYWwvVGFibGVDZWxsXCI7XHJcbmltcG9ydCBUYWJsZVJvdyBmcm9tIFwiQG11aS9tYXRlcmlhbC9UYWJsZVJvd1wiO1xyXG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gXCJyZWFjdC1pMThuZXh0XCI7XHJcbmltcG9ydCB7IERyb3Bkb3duIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uLy4uL2NvbXBvbmVudHMvZHJvcGRvd24vRHJvcGRvd25cIjtcclxuaW1wb3J0IHsgSW5wdXRGaWVsZCB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi8uLi9jb21wb25lbnRzL2lucHV0LWZpZWxkL0lucHV0RmllbGRcIjtcclxuaW1wb3J0IHsgU3dpdGNoIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uLy4uL2NvbXBvbmVudHMvc3dpdGNoL1N3aXRjaFwiO1xyXG5pbXBvcnQgSW5mb0ljb24gZnJvbSBcIkBtdWkvaWNvbnMtbWF0ZXJpYWwvSW5mb1wiO1xyXG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XHJcbmV4cG9ydCBmdW5jdGlvbiBFbWFpbE5vdGlmaWNhdGlvblNldHRpbmdzKF9hKSB7XHJcbiAgICB2YXIgdGl0bGUgPSBfYS50aXRsZSwgZGF0YSA9IF9hLmRhdGEsIHNldERhdGEgPSBfYS5zZXREYXRhLCBlcnJvciA9IF9hLmVycm9yLCBfYiA9IF9hLmRpc2FibGVkLCBkaXNhYmxlZCA9IF9iID09PSB2b2lkIDAgPyBmYWxzZSA6IF9iO1xyXG4gICAgdmFyIHQgPSB1c2VUcmFuc2xhdGlvbigpLnQ7XHJcbiAgICB2YXIgb3B0aW9ucyA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHsgbmFtZTogXCItLU5vbmUtLVwiLCB2YWx1ZTogXCJub25lXCIgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiBcIlNlbmQgRW1haWxcIiwgdmFsdWU6IFwic2VuZEVtYWlsXCIgfSxcclxuICAgICAgICBdO1xyXG4gICAgfSwgW10pO1xyXG4gICAgcmV0dXJuIChfanN4KF9GcmFnbWVudCwgeyBjaGlsZHJlbjogX2pzeHMoVGFibGVSb3csIHsgY2hpbGRyZW46IFtfanN4KFRhYmxlQ2VsbCwgX19hc3NpZ24oeyBhbGlnbjogXCJsZWZ0XCIsIHNjb3BlOiAncm93JywgY29sU3BhbjogMSB9LCB7IGNoaWxkcmVuOiBfanN4KFN3aXRjaCwgeyBkaXNhYmxlZDogZGlzYWJsZWQsIHRpdGxlOiB0aXRsZSwgY2hlY2tlZDogZGF0YS5jaGVja2VkLCBvblRvZ2dsZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0RGF0YShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZGF0YSksIHsgY2hlY2tlZDogIWRhdGEuY2hlY2tlZCB9KSk7IH0gfSkgfSkpLCBfanN4KFRhYmxlQ2VsbCwgX19hc3NpZ24oeyBhbGlnbjogXCJsZWZ0XCIsIHNjb3BlOiAncm93JywgY29sU3BhbjogMSB9LCB7IGNoaWxkcmVuOiBfanN4KERyb3Bkb3duLCB7IHRpdGxlOiBcIlwiLCB2YWx1ZTogZGF0YS5zZWxlY3RlZE9wdGlvbiB8fCAnbm9uZScsIG9wdGlvbnM6IG9wdGlvbnMsIG9uQ2hhbmdlOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiBzZXREYXRhKF9fYXNzaWduKF9fYXNzaWduKHt9LCBkYXRhKSwgeyBzZWxlY3RlZE9wdGlvbjogdmFsIH0pKTsgfSwgZGlzYWJsZWQ6IGRpc2FibGVkIHx8ICFkYXRhLmNoZWNrZWQgfSkgfSkpLCBfanN4KFRhYmxlQ2VsbCwgX19hc3NpZ24oeyBhbGlnbjogXCJsZWZ0XCIsIHNjb3BlOiAncm93JywgY29sU3BhbjogMSB9LCB7IGNoaWxkcmVuOiBfanN4cyhcInNwYW5cIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwiZW1haWxzLWlucHV0XCIgfSwgeyBjaGlsZHJlbjogW19qc3goSW5wdXRGaWVsZCwgeyB0aXRsZTogXCJcIiwgdmFsdWU6IGRhdGEuZW1haWxzLCBvbkNoYW5nZTogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gc2V0RGF0YShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZGF0YSksIHsgZW1haWxzOiB2YWwgfSkpOyB9LCBwbGFjZWhvbGRlcjogdCgnYWRkaXRpb25hbC1zZXR0aW5ncy5lbnRlcllvdXJFbWFpbEFkZHJlc3NlcycpLCBkaXNhYmxlZDogZGlzYWJsZWQgfHwgIWRhdGEuc2VsZWN0ZWRPcHRpb24gfHwgZGF0YS5zZWxlY3RlZE9wdGlvbiA9PT0gJ25vbmUnIHx8ICFkYXRhLmNoZWNrZWQsIGVycm9yOiBlcnJvciwgaGVscGVyVGV4dDogZXJyb3IgPyB0KCdhZGRpdGlvbmFsLXNldHRpbmdzLmluY29ycmVjdC1lbWFpbHMnKSA6ICcgJyB9KSwgX2pzeChUb29sdGlwLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJ0b29sLXRpcFwiLCB0aXRsZTogdChcImFkZGl0aW9uYWwtc2V0dGluZ3MubXVsdGlwbGUtZW1haWwtYWRkcmVzc2VzXCIpIH0sIHsgY2hpbGRyZW46IF9qc3goSW5mb0ljb24sIHt9KSB9KSldIH0pKSB9KSldIH0pIH0pKTtcclxufVxyXG4iLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbmltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzLCBGcmFnbWVudCBhcyBfRnJhZ21lbnQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcclxuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tIFwicmVhY3QtaTE4bmV4dFwiO1xyXG5pbXBvcnQgVGFibGVDb250YWluZXIgZnJvbSBcIkBtdWkvbWF0ZXJpYWwvVGFibGVDb250YWluZXJcIjtcclxuaW1wb3J0IFRhYmxlIGZyb20gXCJAbXVpL21hdGVyaWFsL1RhYmxlXCI7XHJcbmltcG9ydCBUYWJsZUhlYWQgZnJvbSBcIkBtdWkvbWF0ZXJpYWwvVGFibGVIZWFkXCI7XHJcbmltcG9ydCBUYWJsZVJvdyBmcm9tIFwiQG11aS9tYXRlcmlhbC9UYWJsZVJvd1wiO1xyXG5pbXBvcnQgVGFibGVDZWxsIGZyb20gXCJAbXVpL21hdGVyaWFsL1RhYmxlQ2VsbFwiO1xyXG5pbXBvcnQgVGFibGVCb2R5IGZyb20gXCJAbXVpL21hdGVyaWFsL1RhYmxlQm9keVwiO1xyXG5pbXBvcnQgeyBFbWFpbE5vdGlmaWNhdGlvblNldHRpbmdzIH0gZnJvbSBcIi4vY29tcG9uZW50cy9lbWFpbC1ub3RmaWNhdGlvbi1zZXR0aW5ncy9FbWFpbE5vdGlmaWNhdGlvblNldHRpbmdzXCI7XHJcbmltcG9ydCB7IHNlbGVjdFVzZXIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vc3RvcmUvc2xpY2VzL3VzZXJTbGljZVwiO1xyXG5pbXBvcnQgeyB1c2VBcHBTZWxlY3RvciB9IGZyb20gXCIuLi8uLi8uLi8uLi9ob29rc1wiO1xyXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSAnQHNhbGVzZm9yY2UvZGVzaWduLXN5c3RlbS1yZWFjdCc7XHJcbmV4cG9ydCBmdW5jdGlvbiBBZGRpdGlvbmFsU2V0dGluZ3NUYWJsZShfYSkge1xyXG4gICAgdmFyIGRhdGEgPSBfYS5kYXRhLCBlcnJvcnMgPSBfYS5lcnJvcnMsIHNldERhdGEgPSBfYS5zZXREYXRhO1xyXG4gICAgdmFyIF9iID0gdXNlQXBwU2VsZWN0b3Ioc2VsZWN0VXNlciksIGNsaWVudElkID0gX2IuaWQsIGFkZGl0aW9uYWxTZXR0aW5nc1N0YXR1cyA9IF9iLmFkZGl0aW9uYWxTZXR0aW5nc1N0YXR1cztcclxuICAgIHZhciB0ID0gdXNlVHJhbnNsYXRpb24oKS50O1xyXG4gICAgcmV0dXJuIChfanN4cyhfRnJhZ21lbnQsIHsgY2hpbGRyZW46IFthZGRpdGlvbmFsU2V0dGluZ3NTdGF0dXMgPT09ICdsb2FkaW5nJyAmJiBfanN4cyhcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJzcGlubmVyXCIgfSwgeyBjaGlsZHJlbjogW1wiIFwiLCBfanN4KFNwaW5uZXIsIHsgc2l6ZTogXCJtZWRpdW1cIiwgdmFyaWFudDogXCJiYXNlXCIsIGFzc2lzdGl2ZVRleHQ6IHsgbGFiZWw6ICcnIH0gfSldIH0pKSwgX2pzeChUYWJsZUNvbnRhaW5lciwgX19hc3NpZ24oeyBjbGFzc05hbWU6ICd0YWJsZS1jb250YWluZXInLCBzeDogeyBtYXhIZWlnaHQ6IDQ0MCB9IH0sIHsgY2hpbGRyZW46IF9qc3hzKFRhYmxlLCBfX2Fzc2lnbih7IHN0aWNreUhlYWRlcjogdHJ1ZSwgXCJhcmlhLWxhYmVsXCI6IFwic3RpY2t5IHRhYmxlXCIgfSwgeyBjaGlsZHJlbjogW19qc3goVGFibGVIZWFkLCB7IGNoaWxkcmVuOiBfanN4cyhUYWJsZVJvdywgeyBjaGlsZHJlbjogW19qc3goVGFibGVDZWxsLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogJ3RhYmxlLWNlbGwnLCBhbGlnbjogXCJsZWZ0XCIsIGNvbFNwYW46IDEgfSwgeyBjaGlsZHJlbjogdChcImFkZGl0aW9uYWwtc2V0dGluZ3Muc2NoZWR1bGVyLXN0YXR1c1wiKSB9KSksIF9qc3goVGFibGVDZWxsLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogJ3RhYmxlLWNlbGwnLCBhbGlnbjogXCJsZWZ0XCIsIGNvbFNwYW46IDEgfSwgeyBjaGlsZHJlbjogdChcImFkZGl0aW9uYWwtc2V0dGluZ3Mubm90aWZpY2F0aW9uLXNldHRpbmdzXCIpIH0pKSwgX2pzeChUYWJsZUNlbGwsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiAndGFibGUtY2VsbCcsIGFsaWduOiBcImxlZnRcIiwgY29sU3BhbjogMSB9LCB7IGNoaWxkcmVuOiB0KFwiYWRkaXRpb25hbC1zZXR0aW5ncy5ub3RpZmljYXRpb24tcmVjaXBpZW50XCIpIH0pKV0gfSkgfSksIF9qc3hzKFRhYmxlQm9keSwgeyBjaGlsZHJlbjogW19qc3goRW1haWxOb3RpZmljYXRpb25TZXR0aW5ncywgeyB0aXRsZTogdChcImFkZGl0aW9uYWwtc2V0dGluZ3Mubm90aWZ5LWZpZWxkLWNoYW5nZXNcIiksIGRhdGE6IEpTT04ucGFyc2UoZGF0YS5ub3RpZnlGaWVsZENoYW5nZXMpLCBzZXREYXRhOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiBzZXREYXRhKF9fYXNzaWduKF9fYXNzaWduKHt9LCBkYXRhKSwgeyBub3RpZnlGaWVsZENoYW5nZXM6IEpTT04uc3RyaW5naWZ5KHZhbCkgfSkpOyB9LCBlcnJvcjogZXJyb3JzLm5vdGlmeUZpZWxkQ2hhbmdlcywgZGlzYWJsZWQ6IHRydWUgfSksIF9qc3goRW1haWxOb3RpZmljYXRpb25TZXR0aW5ncywgeyB0aXRsZTogdChcImFkZGl0aW9uYWwtc2V0dGluZ3MucmVjZWl2ZS10ZWNobmljYWwtZW1haWxzXCIpLCBkYXRhOiBKU09OLnBhcnNlKGRhdGEucmVjZWl2ZVRlY2huaWNhbEVtYWlscyksIHNldERhdGE6IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIHNldERhdGEoX19hc3NpZ24oX19hc3NpZ24oe30sIGRhdGEpLCB7IHJlY2VpdmVUZWNobmljYWxFbWFpbHM6IEpTT04uc3RyaW5naWZ5KHZhbCkgfSkpOyB9LCBlcnJvcjogZXJyb3JzLnJlY2VpdmVUZWNobmljYWxFbWFpbHMsIGRpc2FibGVkOiB0cnVlIH0pXSB9KV0gfSkpIH0pKV0gfSkpO1xyXG59XHJcbiIsInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcclxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufTtcclxuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMsIEZyYWdtZW50IGFzIF9GcmFnbWVudCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xyXG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gXCJyZWFjdC1pMThuZXh0XCI7XHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2J1dHRvbi9CdXR0b25cIjtcclxuaW1wb3J0IHsgbmF2aWdhdGVUbyB9IGZyb20gXCIuLi8uLi8uLi8uLi9oZWxwZXJzL25hdmlnYXRpb24taGVscGVyXCI7XHJcbmltcG9ydCB7IHVzZUFwcERpc3BhdGNoLCB1c2VBcHBTZWxlY3RvciB9IGZyb20gXCIuLi8uLi8uLi8uLi9ob29rc1wiO1xyXG5pbXBvcnQgeyBzZWxlY3RVc2VyIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3N0b3JlL3NsaWNlcy91c2VyU2xpY2VcIjtcclxuZXhwb3J0IGZ1bmN0aW9uIEJvdHRvbUJ1dHRvbnMoX2EpIHtcclxuICAgIHZhciBoYW5kbGVTYXZlID0gX2EuaGFuZGxlU2F2ZSwgaXNWYWxpZGF0aW9uU3VjY2Vzc2Z1bCA9IF9hLmlzVmFsaWRhdGlvblN1Y2Nlc3NmdWw7XHJcbiAgICB2YXIgdCA9IHVzZVRyYW5zbGF0aW9uKCkudDtcclxuICAgIHZhciBjbGllbnRfc2V0dXBfc3RhdHVzID0gdXNlQXBwU2VsZWN0b3Ioc2VsZWN0VXNlcikuY2xpZW50X3NldHVwX3N0YXR1cztcclxuICAgIHZhciBkaXNwYXRjaCA9IHVzZUFwcERpc3BhdGNoKCk7XHJcbiAgICByZXR1cm4gKF9qc3hzKF9GcmFnbWVudCwgeyBjaGlsZHJlbjogW2NsaWVudF9zZXR1cF9zdGF0dXMgPT0gOSAmJlxyXG4gICAgICAgICAgICAgICAgX2pzeHMoXCJzcGFuXCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiAnYm90dG9tLWJ1dHRvbnMnIH0sIHsgY2hpbGRyZW46IFtfanN4KEJ1dHRvbiwgeyB0ZXh0OiB0KCdjYW5jZWwtYnV0dG9uJyksIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5hdmlnYXRlVG8oJy9kYXNoYm9hcmQnKTsgfSwgaXNEaXNhYmxlZDogdHJ1ZSB9KSwgX2pzeChCdXR0b24sIHsgdGV4dDogdCgnc2F2ZS1idXR0b24nKSwgb25DbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gaGFuZGxlU2F2ZSgpOyB9LCBpc0Rpc2FibGVkOiB0cnVlIH0pXSB9KSksIGNsaWVudF9zZXR1cF9zdGF0dXMgPT0gMyAmJlxyXG4gICAgICAgICAgICAgICAgX2pzeHMoXCJzcGFuXCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiAnYm90dG9tLWJ1dHRvbnMnIH0sIHsgY2hpbGRyZW46IFtfanN4KEJ1dHRvbiwgeyB0ZXh0OiB0KCdiYWNrJyksIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRpc3BhdGNoLnNldFNldHVwU3RhdHVzKE51bWJlcihjbGllbnRfc2V0dXBfc3RhdHVzKSAtIDEpOyB9IH0pLCBfanN4KEJ1dHRvbiwgeyB0ZXh0OiB0KCdjb250aW51ZS10by1hZGQtdG8tY3JtJyksIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkYXRpb25TdWNjZXNzZnVsICYmIGRpc3BhdGNoLnNldFNldHVwU3RhdHVzKDkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVNhdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSldIH0pKV0gfSkpO1xyXG59XHJcbiIsInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcclxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufTtcclxuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMsIEZyYWdtZW50IGFzIF9GcmFnbWVudCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xyXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSBcInJlYWN0LWkxOG5leHRcIjtcclxuaW1wb3J0IHsgZW1haWxWYWxpZGF0b3IgfSBmcm9tIFwiLi4vLi4vaGVscGVycy92YWxpZGF0b3JzXCI7XHJcbmltcG9ydCB7IHVzZUFwcERpc3BhdGNoLCB1c2VBcHBTZWxlY3RvciB9IGZyb20gXCIuLi8uLi9ob29rc1wiO1xyXG5pbXBvcnQgeyBzZWxlY3RVc2VyIH0gZnJvbSBcIi4uLy4uL3N0b3JlL3NsaWNlcy91c2VyU2xpY2VcIjtcclxuaW1wb3J0IHsgQWRkaXRpb25hbFNldHRpbmdzVGFibGUgfSBmcm9tIFwiLi9jb21wb25lbnRzL2FkZGl0aW9uYWwtc2V0dGluZ3MtdGFibGUvQWRkaXRpb25hbFNldHRpbmdzVGFibGVcIjtcclxuaW1wb3J0IHsgQm90dG9tQnV0dG9ucyB9IGZyb20gXCIuL2NvbXBvbmVudHMvYm90dG9tLWJ1dHRvbnMvQm90dG9tQnV0dG9uc1wiO1xyXG52YXIgZGVmYXVsdEVycm9ycyA9IHsgYXV0b1N5bmM6IGZhbHNlLCBub3RpZnlGaWVsZENoYW5nZXM6IGZhbHNlLCByZWNlaXZlVGVjaG5pY2FsRW1haWxzOiBmYWxzZSwgcmVjb3Jkc19wZXJfcGFnZTogZmFsc2UsIGxvZ3NfcGVyX3BhZ2U6IGZhbHNlLCBsb2dzX2ludmVudG9yeV9wZXJfcGFnZTogZmFsc2UgfTtcclxuZXhwb3J0IGZ1bmN0aW9uIEFkZGl0aW9uYWxTZXR0aW5ncyhfYSkge1xyXG4gICAgdmFyIF9iID0gX2EuaXNGcm9tQWRkVG9Dcm0sIGlzRnJvbUFkZFRvQ3JtID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2I7XHJcbiAgICB2YXIgdCA9IHVzZVRyYW5zbGF0aW9uKCkudDtcclxuICAgIHZhciBfYyA9IHVzZUFwcFNlbGVjdG9yKHNlbGVjdFVzZXIpLCBjbGllbnRfc2V0dXBfc3RhdHVzID0gX2MuY2xpZW50X3NldHVwX3N0YXR1cywgYWRkaXRpb25hbFNldHRpbmdzID0gX2MuYWRkaXRpb25hbFNldHRpbmdzO1xyXG4gICAgdmFyIF9kID0gdXNlU3RhdGUoeyBhdXRvU3luYzogYWRkaXRpb25hbFNldHRpbmdzLmF1dG9TeW5jLCBub3RpZnlGaWVsZENoYW5nZXM6IGFkZGl0aW9uYWxTZXR0aW5ncy5ub3RpZnlGaWVsZENoYW5nZXMsXHJcbiAgICAgICAgcmVjZWl2ZVRlY2huaWNhbEVtYWlsczogYWRkaXRpb25hbFNldHRpbmdzLnJlY2VpdmVUZWNobmljYWxFbWFpbHMsXHJcbiAgICAgICAgcmVjb3Jkc19wZXJfcGFnZTogYWRkaXRpb25hbFNldHRpbmdzLnJlY29yZHNfcGVyX3BhZ2UsIGxvZ3NfcGVyX3BhZ2U6IGFkZGl0aW9uYWxTZXR0aW5ncy5sb2dzX3Blcl9wYWdlLFxyXG4gICAgICAgIGxvZ3NfaW52ZW50b3J5X3Blcl9wYWdlOiBhZGRpdGlvbmFsU2V0dGluZ3MubG9nc19pbnZlbnRvcnlfcGVyX3BhZ2UgfSksIGRhdGEgPSBfZFswXSwgc2V0RGF0YSA9IF9kWzFdO1xyXG4gICAgdmFyIF9lID0gdXNlU3RhdGUoZGVmYXVsdEVycm9ycyksIGVycm9ycyA9IF9lWzBdLCBzZXRFcnJvcnMgPSBfZVsxXTtcclxuICAgIHZhciBkaXNwYXRjaCA9IHVzZUFwcERpc3BhdGNoKCk7XHJcbiAgICB2YXIgX2YgPSB1c2VTdGF0ZSh0cnVlKSwgaXNWYWxpZGF0ZVN1Y2Nlc3NmdWwgPSBfZlswXSwgc2V0SXNWYWxpZGF0ZVN1Y2Nlc3NmdWwgPSBfZlsxXTtcclxuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGF1dG9TeW5jID0gYWRkaXRpb25hbFNldHRpbmdzLmF1dG9TeW5jLCBub3RpZnlGaWVsZENoYW5nZXMgPSBhZGRpdGlvbmFsU2V0dGluZ3Mubm90aWZ5RmllbGRDaGFuZ2VzLCByZWNlaXZlVGVjaG5pY2FsRW1haWxzID0gYWRkaXRpb25hbFNldHRpbmdzLnJlY2VpdmVUZWNobmljYWxFbWFpbHMsIHJlY29yZHNfcGVyX3BhZ2UgPSBhZGRpdGlvbmFsU2V0dGluZ3MucmVjb3Jkc19wZXJfcGFnZSwgbG9nc19wZXJfcGFnZSA9IGFkZGl0aW9uYWxTZXR0aW5ncy5sb2dzX3Blcl9wYWdlLCBsb2dzX2ludmVudG9yeV9wZXJfcGFnZSA9IGFkZGl0aW9uYWxTZXR0aW5ncy5sb2dzX2ludmVudG9yeV9wZXJfcGFnZTtcclxuICAgICAgICBzZXREYXRhKHtcclxuICAgICAgICAgICAgYXV0b1N5bmM6IGF1dG9TeW5jLFxyXG4gICAgICAgICAgICBub3RpZnlGaWVsZENoYW5nZXM6IG5vdGlmeUZpZWxkQ2hhbmdlcyxcclxuICAgICAgICAgICAgcmVjZWl2ZVRlY2huaWNhbEVtYWlsczogcmVjZWl2ZVRlY2huaWNhbEVtYWlscyxcclxuICAgICAgICAgICAgcmVjb3Jkc19wZXJfcGFnZTogcmVjb3Jkc19wZXJfcGFnZSxcclxuICAgICAgICAgICAgbG9nc19wZXJfcGFnZTogbG9nc19wZXJfcGFnZSxcclxuICAgICAgICAgICAgbG9nc19pbnZlbnRvcnlfcGVyX3BhZ2U6IGxvZ3NfaW52ZW50b3J5X3Blcl9wYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBbYWRkaXRpb25hbFNldHRpbmdzXSk7XHJcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNldEVycm9ycyhkZWZhdWx0RXJyb3JzKTtcclxuICAgICAgICB2YWxpZGF0aW9uRm9yRXZlcnlLZXlTdHJva2UoKTtcclxuICAgIH0sIFtkYXRhXSk7XHJcbiAgICB2YXIgdmFsaWRhdGVTZXR0aW5ncyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcclxuICAgICAgICB2YXIgZXJyb3IgPSBfX2Fzc2lnbih7fSwgZGVmYXVsdEVycm9ycyk7XHJcbiAgICAgICAgdmFyIGF1dG9TeW5jRW1haWxTdHJpbmcgPSAoX2IgPSAoX2EgPSBKU09OLnBhcnNlKGRhdGEuYXV0b1N5bmMpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW1haWxzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudHJpbSgpO1xyXG4gICAgICAgIGlmICgoYXV0b1N5bmNFbWFpbFN0cmluZyA9PT0gbnVsbCB8fCBhdXRvU3luY0VtYWlsU3RyaW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhdXRvU3luY0VtYWlsU3RyaW5nLnN1YnN0cmluZyhhdXRvU3luY0VtYWlsU3RyaW5nLmxlbmd0aCAtIDEpKSA9PT0gJywnKSB7XHJcbiAgICAgICAgICAgIGVycm9yLmF1dG9TeW5jID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBhdXRvU3luY0VtYWlscyA9IGF1dG9TeW5jRW1haWxTdHJpbmcgPT09IG51bGwgfHwgYXV0b1N5bmNFbWFpbFN0cmluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXV0b1N5bmNFbWFpbFN0cmluZy5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICBhdXRvU3luY0VtYWlscyA9PT0gbnVsbCB8fCBhdXRvU3luY0VtYWlscyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXV0b1N5bmNFbWFpbHMuZmluZChmdW5jdGlvbiAoZW1haWwpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yLmF1dG9TeW5jID0gIWVtYWlsVmFsaWRhdG9yKGVtYWlsLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IuYXV0b1N5bmM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbm90aWZ5RmllbGRDaGFuZ2VzRW1haWxzU3RyaW5nID0gKF9kID0gKF9jID0gSlNPTi5wYXJzZShkYXRhLm5vdGlmeUZpZWxkQ2hhbmdlcykpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5lbWFpbHMpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC50cmltKCk7XHJcbiAgICAgICAgaWYgKChub3RpZnlGaWVsZENoYW5nZXNFbWFpbHNTdHJpbmcgPT09IG51bGwgfHwgbm90aWZ5RmllbGRDaGFuZ2VzRW1haWxzU3RyaW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBub3RpZnlGaWVsZENoYW5nZXNFbWFpbHNTdHJpbmcuc3Vic3RyaW5nKG5vdGlmeUZpZWxkQ2hhbmdlc0VtYWlsc1N0cmluZy5sZW5ndGggLSAxKSkgPT09ICcsJykge1xyXG4gICAgICAgICAgICBlcnJvci5ub3RpZnlGaWVsZENoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIG5vdGlmeUZpZWxkQ2hhbmdlc0VtYWlscyA9IG5vdGlmeUZpZWxkQ2hhbmdlc0VtYWlsc1N0cmluZyA9PT0gbnVsbCB8fCBub3RpZnlGaWVsZENoYW5nZXNFbWFpbHNTdHJpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5vdGlmeUZpZWxkQ2hhbmdlc0VtYWlsc1N0cmluZy5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICBub3RpZnlGaWVsZENoYW5nZXNFbWFpbHMgPT09IG51bGwgfHwgbm90aWZ5RmllbGRDaGFuZ2VzRW1haWxzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBub3RpZnlGaWVsZENoYW5nZXNFbWFpbHMuZmluZChmdW5jdGlvbiAoZW1haWwpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yLm5vdGlmeUZpZWxkQ2hhbmdlcyA9ICFlbWFpbFZhbGlkYXRvcihlbWFpbC50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm5vdGlmeUZpZWxkQ2hhbmdlcztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZWNlaXZlVGVjaG5pY2FsRW1haWxzRW1haWxzU3RyaW5nID0gKF9mID0gKF9lID0gSlNPTi5wYXJzZShkYXRhLnJlY2VpdmVUZWNobmljYWxFbWFpbHMpKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UuZW1haWxzKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YudHJpbSgpO1xyXG4gICAgICAgIGlmICgocmVjZWl2ZVRlY2huaWNhbEVtYWlsc0VtYWlsc1N0cmluZyA9PT0gbnVsbCB8fCByZWNlaXZlVGVjaG5pY2FsRW1haWxzRW1haWxzU3RyaW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZWNlaXZlVGVjaG5pY2FsRW1haWxzRW1haWxzU3RyaW5nLnN1YnN0cmluZyhyZWNlaXZlVGVjaG5pY2FsRW1haWxzRW1haWxzU3RyaW5nLmxlbmd0aCAtIDEpKSA9PT0gJywnKSB7XHJcbiAgICAgICAgICAgIGVycm9yLnJlY2VpdmVUZWNobmljYWxFbWFpbHMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHJlY2VpdmVUZWNobmljYWxFbWFpbHNFbWFpbHMgPSByZWNlaXZlVGVjaG5pY2FsRW1haWxzRW1haWxzU3RyaW5nID09PSBudWxsIHx8IHJlY2VpdmVUZWNobmljYWxFbWFpbHNFbWFpbHNTdHJpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlY2VpdmVUZWNobmljYWxFbWFpbHNFbWFpbHNTdHJpbmcuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgcmVjZWl2ZVRlY2huaWNhbEVtYWlsc0VtYWlscyA9PT0gbnVsbCB8fCByZWNlaXZlVGVjaG5pY2FsRW1haWxzRW1haWxzID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZWNlaXZlVGVjaG5pY2FsRW1haWxzRW1haWxzLmZpbmQoZnVuY3Rpb24gKGVtYWlsKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvci5yZWNlaXZlVGVjaG5pY2FsRW1haWxzID0gIWVtYWlsVmFsaWRhdG9yKGVtYWlsLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IucmVjZWl2ZVRlY2huaWNhbEVtYWlscztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlcnJvcjtcclxuICAgIH07XHJcbiAgICB2YXIgY2hlY2tWYWxpZGF0aW9uRm9yU3VibWlzc2lvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZXJyb3JzID0gdmFsaWRhdGVTZXR0aW5ncygpO1xyXG4gICAgICAgIHNldEVycm9ycyhlcnJvcnMpO1xyXG4gICAgICAgIHJldHVybiAhT2JqZWN0LnZhbHVlcyhlcnJvcnMpLmluY2x1ZGVzKHRydWUpO1xyXG4gICAgfTtcclxuICAgIHZhciB2YWxpZGF0aW9uRm9yRXZlcnlLZXlTdHJva2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2V0SXNWYWxpZGF0ZVN1Y2Nlc3NmdWwoIU9iamVjdC52YWx1ZXModmFsaWRhdGVTZXR0aW5ncygpKS5pbmNsdWRlcyh0cnVlKSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGhhbmRsZVNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2hlY2tWYWxpZGF0aW9uRm9yU3VibWlzc2lvbigpICYmIGRpc3BhdGNoLnNhdmVBZGRpdGlvbmFsU2V0dGluZ3MoZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIChfanN4cyhfRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtjbGllbnRfc2V0dXBfc3RhdHVzID09IDkgJiYgaXNGcm9tQWRkVG9Dcm0gJiZcclxuICAgICAgICAgICAgICAgIF9qc3hzKFwic3BhblwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogJ2NvbmZpZ3VyYXRpb25zLWhlYWRlcicgfSwgeyBjaGlsZHJlbjogW19qc3goXCJwXCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiAnYm9sZCcgfSwgeyBjaGlsZHJlbjogdChcImhlYWRpbmdzLmNvbmZpZ3VyYXRpb25zXCIpIH0pKSwgX2pzeChcInBcIiwgX19hc3NpZ24oeyBzdHlsZTogeyBjb2xvcjogJyM2OTdjZDgnLCBtYXJnaW5MZWZ0OiAnMTBweCcgfSB9LCB7IGNoaWxkcmVuOiB0KFwiYWRkaXRpb25hbC1zZXR0aW5ncy5jb21taW5nLXNvb25cIikgfSkpXSB9KSksIF9qc3goQWRkaXRpb25hbFNldHRpbmdzVGFibGUsIHsgZGF0YTogZGF0YSwgc2V0RGF0YTogc2V0RGF0YSwgZXJyb3JzOiBlcnJvcnMgfSksIF9qc3goQm90dG9tQnV0dG9ucywgeyBoYW5kbGVTYXZlOiBoYW5kbGVTYXZlLCBpc1ZhbGlkYXRpb25TdWNjZXNzZnVsOiBpc1ZhbGlkYXRlU3VjY2Vzc2Z1bCB9KV0gfSkpO1xyXG59XHJcbiIsInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcclxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufTtcclxuaW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcclxuaW1wb3J0IEdyaWQgZnJvbSAnQG11aS9tYXRlcmlhbC9HcmlkJztcclxuaW1wb3J0IHsgQWRkaXRpb25hbFNldHRpbmdzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMvYWRkaXRpb25hbC1zZXR0aW5ncy9BZGRpdGlvbmFsU2V0dGluZ3MnO1xyXG5mdW5jdGlvbiBBZGRpdGlvbmFsU2V0dGluZ3NQYWdlKF9hKSB7XHJcbiAgICB2YXIgX2IgPSBfYS5pc0Zyb21BZGRUb0NybSwgaXNGcm9tQWRkVG9Dcm0gPSBfYiA9PT0gdm9pZCAwID8gZmFsc2UgOiBfYjtcclxuICAgIHJldHVybiAoX2pzeChHcmlkLCBfX2Fzc2lnbih7IGNvbnRhaW5lcjogdHJ1ZSwgY2xhc3NOYW1lOiAnYWRkaXRpb25hbC1zZXR0aW5ncy1wYWdlJyB9LCB7IGNoaWxkcmVuOiBfanN4KEdyaWQsIF9fYXNzaWduKHsgaXRlbTogdHJ1ZSwgeHM6IDEyLCBjbGFzc05hbWU6IFwibWFpbi1zZWN0aW9uXCIgfSwgeyBjaGlsZHJlbjogX2pzeChBZGRpdGlvbmFsU2V0dGluZ3MsIHsgaXNGcm9tQWRkVG9Dcm06IGlzRnJvbUFkZFRvQ3JtIH0pIH0pKSB9KSkpO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IEFkZGl0aW9uYWxTZXR0aW5nc1BhZ2U7XHJcbiJdLCJuYW1lcyI6WyJfX2Fzc2lnbiIsIk9iamVjdCIsImFzc2lnbiIsInQiLCJzIiwiaSIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJ0aGlzIiwiRHJvcGRvd24iLCJfYSIsInRpdGxlIiwidmFsdWUiLCJwbGFjZWhvbGRlciIsIl9iIiwicmVxdWlyZWQiLCJfYyIsImRpc2FibGVkIiwiX2UiLCJ0eXBlIiwiaW5wdXRQcm9wcyIsImVycm9yIiwib3B0aW9ucyIsIm9uQ2hhbmdlIiwiX2YiLCJ1c2VTdGF0ZSIsImlucHV0RXJyb3IiLCJzZXRJbnB1dEVycm9yIiwiX2ciLCJzZXRIZWxwZXJUZXh0IiwidXNlRWZmZWN0IiwiY2xhc3NOYW1lIiwiY2hpbGRyZW4iLCJsYWJlbElkIiwiaWQiLCJsYWJlbCIsImVsbSIsInRhcmdldCIsIm1hcCIsIm9wdGlvbiIsImlzRGlzYWJsZWQiLCJuYW1lIiwiZW1haWxWYWxpZGF0b3IiLCJlbWFpbCIsImNoZWNrZWQiLCJvblRvZ2dsZSIsIkZvcm1Db250cm9sTGFiZWwiLCJjb250cm9sIiwibGFiZWxQbGFjZW1lbnQiLCJFbWFpbE5vdGlmaWNhdGlvblNldHRpbmdzIiwiZGF0YSIsInNldERhdGEiLCJ1c2VUcmFuc2xhdGlvbiIsInVzZU1lbW8iLCJUYWJsZVJvdyIsIlRhYmxlQ2VsbCIsImFsaWduIiwic2NvcGUiLCJjb2xTcGFuIiwic2VsZWN0ZWRPcHRpb24iLCJ2YWwiLCJJbnB1dEZpZWxkIiwiZW1haWxzIiwiaGVscGVyVGV4dCIsIlRvb2x0aXAiLCJJbmZvIiwiQWRkaXRpb25hbFNldHRpbmdzVGFibGUiLCJlcnJvcnMiLCJhZGRpdGlvbmFsU2V0dGluZ3NTdGF0dXMiLCJzaXplIiwidmFyaWFudCIsImFzc2lzdGl2ZVRleHQiLCJUYWJsZUNvbnRhaW5lciIsInN4IiwibWF4SGVpZ2h0IiwiVGFibGUiLCJzdGlja3lIZWFkZXIiLCJUYWJsZUhlYWQiLCJUYWJsZUJvZHkiLCJKU09OIiwicGFyc2UiLCJub3RpZnlGaWVsZENoYW5nZXMiLCJzdHJpbmdpZnkiLCJyZWNlaXZlVGVjaG5pY2FsRW1haWxzIiwiQm90dG9tQnV0dG9ucyIsImhhbmRsZVNhdmUiLCJpc1ZhbGlkYXRpb25TdWNjZXNzZnVsIiwiY2xpZW50X3NldHVwX3N0YXR1cyIsImRpc3BhdGNoIiwiQnV0dG9uIiwidGV4dCIsIm9uQ2xpY2siLCJzZXRTZXR1cFN0YXR1cyIsIk51bWJlciIsImRlZmF1bHRFcnJvcnMiLCJhdXRvU3luYyIsInJlY29yZHNfcGVyX3BhZ2UiLCJsb2dzX3Blcl9wYWdlIiwibG9nc19pbnZlbnRvcnlfcGVyX3BhZ2UiLCJBZGRpdGlvbmFsU2V0dGluZ3MiLCJpc0Zyb21BZGRUb0NybSIsImFkZGl0aW9uYWxTZXR0aW5ncyIsIl9kIiwic2V0RXJyb3JzIiwiaXNWYWxpZGF0ZVN1Y2Nlc3NmdWwiLCJzZXRJc1ZhbGlkYXRlU3VjY2Vzc2Z1bCIsInZhbGlkYXRpb25Gb3JFdmVyeUtleVN0cm9rZSIsInZhbGlkYXRlU2V0dGluZ3MiLCJhdXRvU3luY0VtYWlsU3RyaW5nIiwidHJpbSIsInN1YnN0cmluZyIsImF1dG9TeW5jRW1haWxzIiwic3BsaXQiLCJmaW5kIiwibm90aWZ5RmllbGRDaGFuZ2VzRW1haWxzU3RyaW5nIiwibm90aWZ5RmllbGRDaGFuZ2VzRW1haWxzIiwicmVjZWl2ZVRlY2huaWNhbEVtYWlsc0VtYWlsc1N0cmluZyIsInJlY2VpdmVUZWNobmljYWxFbWFpbHNFbWFpbHMiLCJ2YWx1ZXMiLCJpbmNsdWRlcyIsInN0eWxlIiwiY29sb3IiLCJtYXJnaW5MZWZ0IiwiY2hlY2tWYWxpZGF0aW9uRm9yU3VibWlzc2lvbiIsInNhdmVBZGRpdGlvbmFsU2V0dGluZ3MiLCJHcmlkIiwiY29udGFpbmVyIiwiaXRlbSIsInhzIl0sInNvdXJjZVJvb3QiOiIifQ==